<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="../../resources/css/cssLayout.css"/>
        <title>Facelets Template</title>
    </h:head>
    <body>

        <ui:composition template="./../template.xhtml">

            <ui:define name="content">
                <p:growl id="msgs" showDetail="true" />
                <h:form id="formPost">
                    <p:fieldset legend="#{postBean.selectedPost.titulo}" style="margin-bottom:20px; margin-top: 20px">
                        <h:panelGrid columns="2" cellpadding="5">
                            <p:graphicImage name="/../resources/images/entradaForo.jpg" width="120px"  />
                            <h:outputText
                                value="#{postBean.selectedPost.contenido} " style="font-family: sans-serif" />
                        </h:panelGrid>
                    </p:fieldset>
                </h:form>
                <h:form id="formComentarios"> 
                    <p:dataScroller value="#{postBean.comentariosByPost}" var="comentarios" chunkSize="10">
                        <f:facet name="header">
                            Comentarios
                        </f:facet>
                        <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
                            <p:outputPanel>
                                <h:panelGrid columns="2" cellpadding="5">
                                    <h:outputText value="Autor:" style="font-weight: bolder" />
                                    <h:outputText value="#{comentarios.usuario.usuario}" style="font-weight: normal"/>

                                    <h:outputText value="Fecha:" style="font-weight: bolder" />
                                    <h:outputText value="#{comentarios.fecha}" style="font-weight: normal"/>
                                    
                                    <h:outputText value="Comentario:" style="font-weight: bolder" />
                                    <h:outputText value="#{comentarios.comentario}" style="font-weight: normal"/>
                                    
                                    <p:separator style="width: 915%" />
                                </h:panelGrid>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:dataScroller>
                </h:form>
                
                <h:form id="formDejarComentario">
                    <p:fieldset style="margin-bottom:20px; margin-top: 10px" id="comentario">
                        <h4 style="margin-top: 2px">Deja tu comentario</h4>
                        <p:inputTextarea id="txtComentario" rows="5" cols="50" counter="display" maxlength="250" counterTemplate="{0} caracteres restantes." autoResize="true" value="#{postBean.comentario.comentario}" />
                        <h:outputText id="display" />
                        <p> 
                            <p:commandButton  id="btnDejarComentario" update=":formComentarios, :msgs" actionListener="#{postBean.btnDejarComentario(actionEvent)}" title="Dejar Comentario" value="Dejar Comentario" oncomplete="limpiarComentario()"> 
                                
                            </p:commandButton>
                        </p> 
                    </p:fieldset>
                </h:form>
                
            </ui:define>
        </ui:composition>

    </body>
</html>
